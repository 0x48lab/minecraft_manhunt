# 🏃 Minecraft Manhunt Latest - プロジェクト概要

[![Modrinth Downloads](https://img.shields.io/modrinth/dt/man-hunt-latest?label=Downloads&logo=modrinth)](https://modrinth.com/plugin/man-hunt-latest)
[![GitHub Release](https://img.shields.io/github/v/release/0x48lab/minecraft_manhunt?label=Latest%20Release)](https://github.com/0x48lab/minecraft_manhunt/releases)
[![Minecraft Version](https://img.shields.io/badge/Minecraft-1.21.4-green.svg)](https://www.minecraft.net/)
[![Platform](https://img.shields.io/badge/Platform-Spigot%20%7C%20Paper-orange.svg)](https://papermc.io/)

高度な追跡システム、経済統合、完全な国際化サポートを備えたMinecraftサーバー向けの包括的なマルチプレイヤーManhuntプラグインです。

## ✨ 特徴

### 🎯 コアManhuntゲームプレイ
- **動的役割システム**: プレイヤーはハンター、ランナー、または観戦者になれます
- **高度なコンパス追跡**: ターゲット切り替え可能な仮想コンパスベースの追跡
- **近接警告システム**: ハンターが接近した際のランナー向け段階的警告システム
- **自動ゲーム管理**: 再接続サポート付きのスマートなゲーム状態管理

### ⏱️ ゲームモード
- **時間制限モード** (デフォルト40分)
  - 時間切れでゲーム終了
  - 接近/逃走時間比率で勝者決定
  - キルボーナスでキラーのチームに5分追加
  - リアルタイム優勢率表示
  - このモードではランナー即座リスポン
- **エンドレスモード** (time-limit: 0)
  - 従来のManhuntゲームプレイ
  - 勝利条件を満たすまでゲーム継続
  - ランナーは300秒の待機時間でリスポン
  - 時間的プレッシャーなし、戦略的ゲームプレイ重視

### 💰 経済＆ショップシステム
- **ゲーム内通貨**: ゲームプレイアクションでコインを獲得
- **包括的なショップ**: 6カテゴリ（武器、防具、ツール、消耗品、食料、特殊）に40以上のアイテム
- **役割ベースの報酬**: ハンターとランナーで異なる獲得方法
- **購入制限**: アイテム制限、クールダウン、役割固有の制限
- **移動ボーナス**: 敵が3チャンク以内にいる時のスプリント移動報酬

### 🌍 完全国際化
- **多言語サポート**: 完全な英語と日本語のローカライズ
- **プレイヤー固有の言語**: 個別の言語設定
- **ローカライズされたショップアイテム**: すべてのアイテムと説明が完全翻訳
- **動的UI**: すべてのインターフェースがプレイヤーの言語設定に適応

### 📊 高度な統計＆結果
- **詳細なプレイヤー統計**: パフォーマンス、収益、達成度を追跡
- **MVPシステム**: トップパフォーマーの自動認識
- **包括的なゲーム結果**: 視覚効果付きの多段階結果表示
- **チームランキング**: パフォーマンスベースのチームと個人ランキング

### 🎮 強化されたユーザー体験
- **役割選択GUI**: 直感的なグラフィカル役割選択メニュー
- **観戦者メニュー**: 観戦者向けの簡単なテレポートシステム
- **チームコミュニケーション**: プライベートチームチャットと座標共有
- **バディーシステム**: チームメイトとパートナーになって連携強化
- **リアルタイムUI**: 動的なスコアボード、アクションバー、ボスバー表示
- **ワープシステム**: コストと遅延付きでチームメイトにテレポート
- **自動夜スキップ**: 夜になると自動的に夜明けにスキップ
- **実績リセット**: 各ゲームで新たなスタート

## 🎯 ゲーム目標

- **🏃 ランナー**: エンダードラゴンを倒して勝利を達成
- **🗡 ハンター**: ランナーが目標を達成する前に全員を排除
- **👁 観戦者**: 完全な移動性とテレポートオプションでゲームを観察

## 📋 必要環境

- **Minecraftバージョン**: 1.21.4
- **サーバーソフトウェア**: SpigotまたはPaper
- **Javaバージョン**: 21以上
- **最小プレイヤー数**: 2（設定可能）

## 🎮 クイックスタート

1. サーバーに参加して `/manhunt roles` を実行
2. メニューを使用して役割を選択（GUIメニュー）
3. 最小プレイヤー数と自動ゲーム開始を待つ
4. `/manhunt help` で利用可能なすべてのコマンドを確認

## ⚙️ 設定

プラグインは `config.yml` で高度に設定可能です：

```yaml
# 言語設定
language:
  default: "en"                    # デフォルト言語 (ja/en)
  per-player: true                 # プレイヤーごとの言語設定

# ゲーム設定
game:
  min-players: 2                   # 開始に必要な最小プレイヤー数
  start-countdown: 10              # ゲーム開始前のカウントダウン
  reset-advancements: true         # ゲーム開始時に実績をリセット
  time-limit: 40                   # ゲーム時間制限（分）（0でエンドレス）
  
  # 時間モード設定（time-limit > 0の時のみ有効）
  time-mode:
    kill-bonus: 5                  # 各キルで追加される分数
    proximity-distance: 3          # 接近計算のチャンク数
    runner-instant-respawn: true   # ランナーの即座リスポン
    runner-respawn-time: 30        # リスポン待機時間（秒）

# 経済設定
economy:
  starting-balance: 0              # 開始時の所持金 (0G)
  currency-unit: "G"               # 通貨記号
  earn-multiplier: 2.0             # 獲得率倍率
  hunter:
    damage-reward: 5               # ダメージポイントあたりの報酬
    kill-reward: 150               # キルあたりの報酬
    tracking-reward: 30            # 継続追跡ボーナス
  runner:
    survival-bonus: 0.05           # 秒あたりの生存ボーナス
    nether-reward: 200             # ネザー進入報酬
    end-reward: 500                # エンド進入報酬
```

## 🎯 コマンド

### プレイヤーコマンド
- `/manhunt role <runner|hunter|spectator>` - 役割変更（待機中のみ）
- `/manhunt roles` - 役割選択GUIを開く
- `/manhunt status` - ゲーム状況確認
- `/manhunt compass` - 追跡コンパスを取得（ハンターのみ）
- `/manhunt spectate` - 観戦者メニューを開く（観戦者のみ）
- `/r <メッセージ>` - チームチャット
- `/pos` - チームに座標を共有
- `/shop` - ショップメニューを開く
- `/shop balance` - 残高確認
- `/buddy <サブコマンド>` - バディーシステムコマンド（ゲーム中のみ）
- `/warp <プレイヤー>` - チームメイトにテレポート（100Gコスト、5秒遅延）

### 管理者コマンド
- `/manhunt start` - ゲーム強制開始
- `/manhunt stop` または `/manhunt end` - ゲーム強制終了
- `/manhunt sethunter <プレイヤー>` - ハンター役割を割り当て
- `/manhunt setrunner <プレイヤー>` - ランナー役割を割り当て
- `/manhunt setspectator <プレイヤー>` - 観戦者役割を割り当て
- `/manhunt minplayers <数値>` - 最小プレイヤー数を設定
- `/manhunt reload [config|shop|all]` - 設定をリロード
- `/manhunt ui <toggle|status>` - UI表示を制御
- `/manhunt respawntime <プレイヤー> <秒>` - カスタムリスポン時間を設定
- `/manhunt reset` - ゲーム強制リセット（ゲーム終了後のみ）
- `/manhunt give <プレイヤー> <金額>` - プレイヤーにお金を付与
- `/manhunt validate-messages` - メッセージファイルの整合性チェック
- `/manhunt diagnose` - 診断情報を出力

## 🏆 経済システム

### 獲得方法

**🗡 ハンター:**
- ランナーに与えたダメージポイントあたり5G
- ランナー排除あたり150G
- 30秒間継続的にランナーを追跡（100m以内）で30G
- 30秒ごとに1.5G（時間ボーナス）

**🏃 ランナー:**
- 30秒ごとに1.5G（生存ボーナス）
- ネザー到達で200G
- 要塞発見で300G
- エンド到達で500G
- ダイヤモンド収集あたり25G
- 成功した逃走（100m以上の距離）で20G
- 敵が近くにいる時のスプリント移動ボーナス

### ショップカテゴリ
- **⚔️ 武器**: 剣、斧、トライデント
- **🛡️ 防具**: 各種素材のフル装備セット
- **🔧 ツール**: ツルハシ、シャベル、バケツ
- **🧪 消耗品**: ポーション、金のリンゴ
- **🍖 食料**: 各種食べ物
- **✨ 特殊**: エリトラ、エンダーパール、エメラルド

## 🌟 高度な機能

### スポーン配置システム
- **動的配置範囲**: 総プレイヤー数に基づいて自動調整
  - 2人: 最大500m
  - 20人: 最大2000m
  - 20人以上: 20人ごとに追加500m
- **敵の距離**: 敵チーム間の最小距離（デフォルト: 500m）
- **チーム比率調整**:
  - 少数派チーム: 近くに配置
  - 多数派チーム: チーム比率に基づいて分散
- **安全配置**: 危険な場所を避け、地上に配置

### 近接警告システム
- **赤警告**: ハンターが1チャンク以内
- **橙警告**: ハンターが2チャンク以内
- **黄警告**: ハンターが3チャンク以内
- **頻度制御**: スパム防止のための警告制限

### 仮想コンパス追跡システム
- 物理的なコンパスアイテムまたは空手で右クリック
- 右クリックでターゲット切り替え（ランナーを順番に切り替え）
- パーティクル付きの距離と方向表示
- 同一ワールド内でのみ追跡
- 死亡状態認識（死亡中のランナーは追跡されない）
- 使用間の1秒クールダウン

### チーム連携
- `/r <メッセージ>` でプライベートチームチャット
- `/pos` で座標共有
- Tabリストでリアルタイムチームメイト位置表示
- より密接な連携のためのバディーシステム

### バディーシステム
- チームメイト1人とパートナーになってより密接に連携
- スコアボードでリアルタイムバディー位置表示
- プレイヤーリストでオレンジ色ハイライト
- コマンド: `/buddy invite`、`accept`、`decline`、`remove`、`status`
- バディー関係には相互の同意が必要
- ゲーム終了またはプレイヤー切断時に自動クリーンアップ

### リスポンシステム
- **ハンター**: 即座リスポン（1tick遅延）
- **ランナー**: 
  - エンドレスモード: スペクテーターモードで300秒待機
  - 時間モード: 即座リスポン
  - リアルタイムカウントダウン表示
  - 待機中の完全なスペクテーター機能

### 遭遇通知
- ハンターがランナーを発見した時の自動通知
- 通知間の設定可能なクールダウン
- 音響とタイトル効果
- 継続的な接近に対する重複通知を防止

## 🔧 技術詳細

- **言語**: Kotlin 1.9.24
- **ビルドツール**: Gradle 8.8
- **ターゲットJVM**: Java 21
- **API**: Spigot/Paper 1.21.4
- **アーキテクチャ**: 包括的なマネージャークラスを持つイベント駆動型

### コアコンポーネント
- `Main.kt` - プラグインメインクラス
- `GameManager.kt` - ゲーム状態とプレイヤー管理
- `VirtualCompass.kt` - 仮想コンパス追跡システム
- `EventListener.kt` - イベント処理
- `UIManager.kt` - ユーザーインターフェース管理
- `EconomyManager.kt` - 通貨システム
- `MessageManager.kt` - 国際化
- `ProximityTimeTracker.kt` - 時間モード追跡

### ビルド

1. リポジトリをクローン
2. `./gradlew build` を実行
3. プラグインJARは `build/libs/` にあります

### メッセージキー検証

ビルドプロセスは、コードで使用されているすべてのメッセージキーが `ja.yml` と `en.yml` ファイルの両方で定義されていることを自動的にチェックします。

メッセージキーを手動でチェックするには：
```bash
./gradlew checkMessageKeys
```

キーが不足している場合、ビルドは失敗し、不足しているキーの提案を提供します。

## 📝 最新アップデート (2025-07-22)

### 新機能
- **実績リセット**: ゲーム開始時にすべてのプレイヤーの実績を自動的にリセット
- **夜スキップ**: 夜になると自動的に夜明けに進む（設定可能）
- **ワープコマンド**: 100Gコストと5秒遅延でチームメイトにテレポート
- **追跡持続ボーナス**: ハンターがランナーを継続的に追跡すると30G獲得

### バグ修正
- 死亡したランナーがスペクテーターモードではなくサバイバルモードで表示されるランナーリスポン可視性バグを修正
- リスポン待機時間中の死亡したランナーに対するコンパス追跡が継続する問題を修正
- 死亡したランナーに対して実際の距離が表示される距離表示を修正（現在は0mを表示）
- 死亡したランナーに対する経済ボーナス支払いを修正
- 重複する遭遇通知を防止
- ゲームリセット後に役割選択GUIが機能しない問題を修正
- コードベース全体のハードコードされた言語文字列を修正
- 結果表示後の即座リセットのための不要なゲームリセットカウントダウンを削除

## 🤝 貢献

貢献を歓迎します！お気軽に：
- GitHub Issuesでバグを報告
- 新機能を提案
- プルリクエストを送信
- 翻訳を支援

## 📄 ライセンス

このプロジェクトはMITライセンスの下でライセンスされています - 詳細は[LICENSE](LICENSE)ファイルを参照してください。

## 🔗 リンク

- [公式ガイド](https://0x48lab.github.io/minecraft_manhunt/)
- [Modrinthページ](https://modrinth.com/plugin/man-hunt-latest)
- [GitHubリポジトリ](https://github.com/0x48lab/minecraft_manhunt)
- [イシュートラッカー](https://github.com/0x48lab/minecraft_manhunt/issues)

---

**🎮 Manhuntの冒険を始める準備はできましたか？今すぐダウンロードして究極の追跡体験を！**